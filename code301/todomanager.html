<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>
    </title>
    <style media="screen">
    button{
      background-color: #D95B43;
      color:white;
      padding: 5px;
      text-align: center;
      text-decoration: none;
      font-family: sans-serif;
      font-size: 16px;
      cursor: pointer;
      border: 2px white solid;

    }

    button:hover{
      background-color: #D5DED9;
      color: #D95B43;

    }
    ul{
        list-style: none;
        padding-left: 0px;
        margin-bottom: 80px;
      }
      body{
        margin:0px;
        color: #D5DED9;
        font-family: sans-serif;
        text-align: center;
      }

    #new-to-do{
      width: 30%;
      background-color: gray;
      position: fixed;
      bottom: 0;
      right :0;
      padding: 20px;
      z-index: 1;
      font-size: 1.2em;
    }
    h2{
      color:#D95B43;
    }
    .lists{
      color: white;
      text-align: center;
    }
    .start{
      text-align: center;
      margin-top: 20px;
      vertical-align: top;
      background-color: #D5DED9;

    }
    .hide{
      display: none;
    }

    .exsiting-boards{
      color: #D95B43;
    }

    .exsiting-boards li{
      color: #D95B43;
      display:inline-block;
    }

      .holder{
        display: inline-block;
        width: 30%;
        background-color: #D5DED9;
        vertical-align: top;
        box-sizing: border-box;
        min-height: 900px;
      }
      li{
        padding:20px;
        border: solid white 1px;
        margin: 20px;
        text-align: left;
      }
      .short-term{
        background-color: #99B2B7;
      }
      .long-term{
        background-color: #7A6A53;
      }
      #signout{
        left:50px;
      }
      #instructions{
        height: 40px;
        width: 320px;
      }
      #new-to-do label{
        display: block;
        margin: 20px;
      }
    </style>
  </head>
  <body>
    <div class="start">

      <form id="form-newboard"><h4>Sign-In</h4>
        <input type="text" id="username" value="" placeholder="Name">
        <input type="text" id="boardname" value="" placeholder="Taskboard">
        <button type="submit" id='newboard' class ='button'>Create New Board</button>
      </form>

      <ul class='exsiting-boards'>
        <h2>Click on one of your previously created boards</h2>

      </ul>

    </div>




    <div class="lists hide">
      <div class="holder to-do-holder">

          <ul id='new'><h2>New items</h2>
            <!-- <li id='key'><p>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </p>

              <span>Status:</span>
              <select class="Status" id="status">
                <option value="new">New</option>
                <option value="progress">In Progress</option>
                <option value="done">Done</option>

              </select>

            </li> -->
          </ul>
        </div>
        <div class="holder progress-holder">

          <ul id='progress'><h2>In Progress</h2>
            <!-- <li>in progress to do</li> -->

          </ul>
        </div>

        <div class="holder done-holder">

          <ul id='done'><h2>Finished tasks</h2>
            <!-- <li>done to do </li> -->
          </ul>
        </div>

    <form id="new-to-do">
      <label for="">What type of issue is this?
      <select class="Type" id="type">
        <option value="Report bug or error">Report bug or error</option>
        <option value="Request to add content">Request to add content</option>
        <option value="Suggest a change">Suggest a change</option>
        <option value="General feedback">General feedback</option>
      </select>
    </label>
    <label for="">Please describe the issue or request
      <input id="discription" type="text" name="name" value="" placeholder="instructions">
    </label>

      <label for="">What is the timeline for this to be done?
      <select id="time-select">
        <option value="short-term">ASAP</option>
        <option value="long-term">Long term goal</option>

      </select>
      </label>

      <label for="">Do you want an email when finished?
        <input type="checkbox" id='yestoemail' name="name" value="">      </label>

      <button type="submit">Create new task</button>

    </form>
  </div>


  </body>
</html>

<script type="text/javascript" src='Vanilla_DOMfunctions.js'></script>
<script type="text/javascript">

neweventlistener('#form-newboard', 'submit', createnewboard)
neweventlistener('#new-to-do', 'submit', makenewpost)

var start=document.querySelector('.start');
var lists=document.querySelector('.lists');
var taskboards={}
var currentboard
readtaskboards()

function readtaskboards(){
  if (localStorage.getItem('taskboards')) {
    var taskboardsstring = localStorage.getItem('taskboards');
    taskboards = JSON.parse(taskboardsstring)
    var boardkeys= Object.keys(taskboards)
    for (var i = 0; i < boardkeys.length; i++) {
      var li=newli('.exsiting-boards', boardkeys[i], 'exsiting-boards-lis', boardkeys[i])
      neweventlistener('#'+boardkeys[i], 'click', changecurrentboard)

    }
  }
}

function changecurrentboard(){
  currentboard=event.target.textContent
  readposts(currentboard)
}




function createnewboard(){
  event.preventDefault()
  var username=document.querySelector('#username').value;
  console.log(username);
  var boardname=document.querySelector('#boardname').value;
  var newBoard={
    'username':username,
    'posts':[]
  }
  taskboards[boardname]=newBoard
  currentboard=boardname
  // console.log(newBoard);
  localStorage.setItem('taskboards', JSON.stringify(taskboards))

  readtaskboards();
  readposts(boardname)
}


function readposts(currentboard){
  start.classList.add('hide');
  lists.classList.remove('hide');
  board=taskboards[currentboard]
  posts = board['posts']
  for (var i = 0; i < posts.length; i++) {
    appendposts(posts[i])
  }
}


var statuses=['new', 'progress', 'done']
var statuses_text=['New', 'In Progress', 'Done']

function appendposts(post){
  status=post['status']
  title=post['title']
  content=post['discription']
  timeline=post['timeline']
  time=post['time']
  var li= newli('#'+status, title, timeline, 'id'+time)
  var discription= newTagText('p', '#id'+time, content)
  var submittedby=newTagText('div', '#id'+time, 'Submitted by: '+post['author']);

  var approve = document.createElement('select')
  approve.setAttribute('class', "Status")
  li.appendChild(approve);
  for (var i = 0; i < statuses.length; i++) {
    var option= document.createElement('option')
    option.setAttribute('value', statuses[i])
    option.textContent=statuses_text[i]
    approve.appendChild(option)
  }
  // approve.val(value)
}

function makenewpost(){
  event.preventDefault()

  post={
    'title': document.querySelector('.Type').value,
    'author': 'megan',
    'discription':document.querySelector('#discription').value,
    'timeline':document.querySelector('#time-select').value,
    'status':'new',
    'time': new Date().getTime()
  }
  taskboards[currentboard]['posts'].push(post);
  writetaskboards()
  appendposts(post)

}

function writetaskboards() {
  localStorage.setItem('taskboards', JSON.stringify(taskboards))


}


</script>
